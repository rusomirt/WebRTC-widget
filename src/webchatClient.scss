// CSS classes naming conventions - BEM (https://en.bem.info/methodology):
// block-name
// block-name--block-modifier-name
// block-name__element-name
// block-name__element-name--element-modifier-name

// SCSS variables suffixes contain abbreviated CSS properties or their parts:
// -c - color
// -p - padding
// -m - margin
// -h - height
// -w - width
// -t - top
// -l - left
// -r - right
// -b - bottom
// -pt - padding-top
// -pl - padding-left
// -pr - padding-right
// -pb - padding-bottom
// -px - horizontal padding (-left & -right)
// -py - vertical padding (-top & -bottom)

// For using font-awesome icons as font symbols
@import url(font-awesome/css/font-awesome.css);

@font-face {
  font-family: 'Lucida Grande';
  src: url(fonts/LucidaGrandeRegular.ttf);
}
@font-face {
  font-family: 'Roboto Medium';
  src: url(fonts/RobotoMedium.ttf);
}
@font-face {
  font-family: 'Roboto Regular';
  src: url(fonts/RobotoRegular.ttf);
}

video {
  max-width: 100%;
}

// Generic buttons
.btn {
  padding: 0;
  border: none;
  outline: none;
  cursor: pointer;
}
.btn--circle {
  @extend .btn;
  border-radius: 50%;
}

// Global colors
$webchat-c-main: #00c48a;
$webchat-c-stop: #c41200;
$webchat-c-bluedark: #3b5d80;
$webchat-c-bluelight: #75baff;


$webchat-r: 20px;
$webchat-b: 20px;
$webchat-launch-btn-size: 64px;
$webchat-chat-btn-size: 50px;
// Distance between chat type buttons (video, voice or text) and chat launch button:
$webchat-chat-btn-shift: 40px;
$webchat-btns-c: $webchat-c-main;
$webchat-btns-show-time: 1s;

.webchat {
  position: fixed;
  right: $webchat-r;
  bottom: $webchat-b;

  display: inline-block;
  width: 0;
  height: 0;

  .webchat__launch-btn {
    @extend .btn--circle;
    position: absolute;
    right: 0;
    bottom: 0;

    width: $webchat-launch-btn-size;
    height: $webchat-launch-btn-size;
    background-color: $webchat-btns-c;
  }
  .webchat__chat-btn {
    @extend .btn--circle;
    position: absolute;
    opacity: 1;
    visibility: visible;
    transition: opacity $webchat-btns-show-time;

    width: $webchat-chat-btn-size;
    height: $webchat-chat-btn-size;
    background-color: $webchat-btns-c;
  }
  .webchat__chat-btn--hidden {
    opacity: 0 !important;
    visibility: hidden !important;
  }

  .webchat__chat-btn--video {
    right: $webchat-chat-btn-shift + $webchat-launch-btn-size;
    bottom: ($webchat-launch-btn-size - $webchat-chat-btn-size) * 0.5;
  }
  .webchat__chat-btn--voice {
    right: ($webchat-chat-btn-shift + $webchat-launch-btn-size) * 0.707;
    bottom: ($webchat-chat-btn-shift + $webchat-launch-btn-size) * 0.707;
  }
  .webchat__chat-btn--text {
    right: ($webchat-launch-btn-size - $webchat-chat-btn-size) * 0.5;
    bottom: $webchat-chat-btn-shift + $webchat-launch-btn-size;
  }
}

$modal-bg-transparency: 0.5;
$modal-inner-max-w: 90%;

.modal {
  position: fixed;
  top: 0;           // covers whole screen
  left: 0;
  right: 0;
  bottom: 0;

  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, $modal-bg-transparency);

  .modal__inner {
    max-width: $modal-inner-max-w;  // shrink to window on narrow screens (< $modal-inner-w)
  }
}

$copyright-padding: 4px;

$copyright-font-family: 'Roboto Regular', sans-serif;
$copyright-font-size: 12px;
$copyright-font-c: white;

$copyright-inner-w: 2px;
$copyright-inner-c: #b33b29;
$copyright-circle1-w: 2px;
$copyright-circle1-c: white;
$copyright-circle2-w: 3px;
$copyright-circle2-c: #b33b29;
$copyright-mr: 4px;

.copyright {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: $copyright-padding;

  .copyright__text {
    display: inline-block;

    font-family: $copyright-font-family;
    font-size: $copyright-font-size;
    color: $copyright-font-c;
  }
  .copyright__sign {
    display: block;
    margin: $copyright-circle2-w ($copyright-circle2-w + $copyright-mr) 0 0;

    width: $copyright-inner-w;
    height: $copyright-inner-w;
    background-color: $copyright-inner-c;

    border: $copyright-circle1-w solid $copyright-circle1-c;
    border-radius: 50%;

    box-shadow: 0 0 0 $copyright-circle2-w $copyright-circle2-c;
  }
}

$chat-video-out-w: 20%;       // 20% of .chat width
$chat-panel-w: 90%;           // 90% of .chat width
$chat-panel-max-w: 300px;
$chat-panel-h: 50px;
$chat-panel-b: 26px;
$chat-panel-low-b: 10px;
$chat-btns-group-mx: $chat-panel-h * 0.25;
$chat-stop-btn-size: 64px;

$chat-info-border-w: 10px;
$chat-info-border-c: $webchat-c-bluedark;
$chat-info-bg-c: white;
$chat-info-mb: $chat-panel-b + $chat-panel-h + 24px;

$chat-status-p: 6px 0 12px;
$chat-status-font: 'Roboto Medium', sans-serif;
$chat-status-font-size: 17px;
$chat-status-font-c: $webchat-c-main;

$chat-status-high-p: 40px 0 22px;

$chat-status-success-bg-c: $webchat-c-main;
$chat-status-success-font-c: white;
$chat-status-success-p: 57px 0;

$chat-status-fail-bg-c: $webchat-c-stop;
$chat-status-fail-font-c: white;
$chat-status-fail-p: 21px 0 30px;

$chat-status-hdr-mb: 15px;
$chat-status-hdr-font: 'Roboto Medium', sans-serif;
$chat-status-hdr-font-size: 18px;

$chat-status-txt-mb: 15px;
$chat-status-txt-font: 'Roboto Regular', sans-serif;
$chat-status-txt-font-size: 16px;

$chat-phone-input-p: 9px 10px 11px;
$chat-phone-input-font: 'Roboto Regular', sans-serif;
$chat-phone-input-font-size: 12px;
$chat-phone-input-btn-bg-c: $webchat-c-bluedark;
$chat-phone-input-btn-size: 37px;
$chat-phone-input-btn-font-c: white;

$chat-circle-inner-w: 2px;
$chat-circle-inner-c: $webchat-c-main;
$chat-circle-circle1-w: 2px;
$chat-circle-circle1-c: white;
$chat-circle-circle2-w: 3px;
$chat-circle-circle2-c: $webchat-c-main;

$chat-logo-mt: 10px;
$chat-tips-w: 400px;
$chat-tips-h: 100px;
$chat-tips-font: 'Roboto Regular', sans-serif;
$chat-tips-font-size: 16px;
$chat-tips-font-c: black;
$chat-tips-p: 78px 0;

$chat-video-out-top: 10px;
$chat-video-out-right: 10px;

.chat {
  position: relative;   /* for abs-positioned .chat__panel*/
  height: 100%;

  .chat__info {
    margin-bottom: $chat-info-mb;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;

    background: $chat-info-bg-c;

    &.chat__info--bordered {
      border-top: $chat-info-border-w solid $chat-info-border-c;
    }

    &.chat__info--short {
      margin-bottom: 0;
    }

    .chat__status {
      padding: $chat-status-p;
      font-family: $chat-status-font;
      font-size: $chat-status-font-size;
      color: $chat-status-font-c;

      &.chat__status--high {
        padding: $chat-status-high-p;
      }

      &.chat__status--success {
        width: 100%;
        text-align: center;
        background-color: $chat-status-success-bg-c;
        color: $chat-status-success-font-c;
        padding: $chat-status-success-p;
      }

      &.chat__status--fail {
        width: 100%;
        text-align: center;
        background-color: $chat-status-fail-bg-c;
        color: $chat-status-fail-font-c;
        padding: $chat-status-fail-p;
      }

      .chat__phone-input-wrapper {
        .chat__phone-input {
          padding: $chat-phone-input-p;
          outline: none;
          border: none;
          font-family: $chat-phone-input-font;
          font-size: $chat-phone-input-font-size;
        }
        .chat__phone-input-btn {
          @extend .btn;
          background: $chat-phone-input-btn-bg-c;
          width: $chat-phone-input-btn-size;
          height: $chat-phone-input-btn-size;
          color: $chat-phone-input-btn-font-c;
        }
      }

      .chat__status-txt-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .chat__status-hdr {
        font-family: $chat-status-hdr-font;
        font-size: $chat-status-hdr-font-size;

        &.chat__status-hdr--margined {
          margin-bottom: $chat-status-hdr-mb;
        }
      }
      .chat__status-txt {
        margin-bottom: $chat-status-txt-mb;
        font-family: $chat-status-txt-font;
        font-size: $chat-status-txt-font-size;
      }

      .chat__timer-wrapper {
        width: 100%;
        text-align: center;
      }
    }
    .chat__logo {
      margin-top: $chat-logo-mt;
    }
    .chat__tips {
      width: $chat-tips-w;
      height: $chat-tips-h;

      font-family: $chat-tips-font;
      font-size: $chat-tips-font-size;
      color: $chat-tips-font-c;
      padding: $chat-tips-p;
      text-align: center;
    }

  }

  .chat__circles {
    display: inline-block;

    .chat__circle {
      display: inline-block;

      margin: 0 $chat-circle-circle2-w + 1px;

      width: $chat-circle-inner-w;
      height: $chat-circle-inner-w;
      background-color: $chat-circle-inner-c;

      border: $chat-circle-circle1-w solid $chat-circle-circle1-c;
      border-radius: 50%;

      box-shadow: 0 0 0 $chat-circle-circle2-w $chat-circle-circle2-c;

      &:nth-of-type(2) {
        margin-bottom: 5px;
        opacity: 0.9;
      }
      &:nth-of-type(3) {
        margin-bottom: 9px;
        opacity: 0.8;
      }
      &:nth-of-type(4) {
        margin-bottom: 11px;
        opacity: 0.7;
      }
      &:nth-of-type(5) {
        margin-bottom: 8px;
        opacity: 0.6;
      }
    }
  }

  .chat__video-container {
    display: block;
    position: relative;

    &.chat__video-container--hidden {
      display: none;
    }
    .chat__video-in {
      width: 100%;
      height: 100%;
    }
    .chat__video-out {
      position: absolute;
      top: $chat-video-out-top;
      right: $chat-video-out-right;
      width: $chat-video-out-w;
    }
  }
}

$chat-btns-group-mx: 3%;
$temp1: 100% - $chat-btns-group-mx*4;

.chat__panel {
  position: absolute;
  bottom: $chat-panel-b;
  left: 50%;
  transform: translateX(-50%);

  width: $chat-panel-w;
  max-width: $chat-panel-max-w;
  height: $chat-panel-h;
  border-radius: $chat-panel-h * 0.5;
  background: white;

  &.chat__panel--low {
    bottom: $chat-panel-low-b;
  }

  .chat__btns-group {
    width: calc( ( calc(100% - #{$chat-btns-group-mx*4}) - #{$chat-stop-btn-size} ) /2);

    display: inline-flex;
    justify-content: space-around;
    align-items: center;
  }
  .chat__btns-group:first-of-type {
    margin-left: $chat-btns-group-mx;
    margin-right: calc(#{$chat-stop-btn-size/2} + #{$chat-btns-group-mx});
  }
  .chat__btns-group:not(:first-of-type) {
    margin-left: calc(#{$chat-stop-btn-size/2} + #{$chat-btns-group-mx});
    margin-right: $chat-btns-group-mx;
  }

  .chat__btn--small {
    @extend .btn--circle;
    width: $chat-panel-h;
    height: $chat-panel-h;
    background-color: transparent;
  }
  .chat__btn--stop {
    position: absolute;
    top: ($chat-panel-h - $chat-stop-btn-size)/2;
    left: 50%;
    transform: translateX(-50%);

    @extend .btn--circle;
    width: $chat-stop-btn-size;
    height: $chat-stop-btn-size;
    background-color: $webchat-c-stop;
  }
}

$msgr-bg-c: white;
$msgr-mb: $chat-panel-low-b + $chat-panel-h + 14px;
$msgr-list-w: 400px;
$msgr-p: 0 15px 15px;
$msgr-input-w: calc(100% - 30px);
$msgr-input-p: 10px 16px 12px;
$msgr-input-border-radius: 8px;
$msgr-input-shadow: 0 0 4px 0 rgba(0,0,0,0.1);
$msgr-input-font: 'Lucida Grande', sans-serif;
$msgr-input-font-size: 16px;
$msgr-input-font-color: #4a4a4a;

.msgr {
  max-width: 100%;
  background: $msgr-bg-c;
  margin-bottom: $msgr-mb;
  padding: $msgr-p;

  .msgr__list {
    height: 400px;  // debug

    width: $msgr-list-w;
    max-width: 100%; // shrink on screens < $msgr-list-w
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;

    .msgr__msg {
      margin-bottom: 14px;
      clear: both;
      max-width: 100%;

      &.msgr__msg--in {
        align-self: flex-end;
      }
      &.msgr__msg--out {
        align-self: flex-start;
      }

      .msgr__msg-body {
        margin-bottom: 4px;
        padding: 8px 16px;
        border-radius: 26px;
        color: white;
        font-family: 'Lucida Grande', sans-serif;
        font-size: 16px;
        word-wrap: break-word;

        &.msgr__msg-body--in {
          background-color: $webchat-c-bluedark;
          border-bottom-right-radius: 0;
        }
        &.msgr__msg-body--out {
          background-color: $webchat-c-bluelight;
          border-bottom-left-radius: 0;
        }
      }
      .msgr__msg-info {
        font-family: 'Lucida Grande', sans-serif;
        font-size: 12px;

        &.msgr__msg-info--in {
          float: right;
          color: $webchat-c-bluedark;
        }
        &.msgr__msg-info--out {
          float: left;
          color: $webchat-c-bluelight;
        }
      }
    }
  }

  .msgr__input-form {
    width: $msgr-input-w;

    .msgr__input {
      width: 100%;
      padding: $msgr-input-p;
      outline: none;
      border: none;
      border-radius: $msgr-input-border-radius;
      box-shadow: $msgr-input-shadow;
      font-family: $msgr-input-font;
      font-size: $msgr-input-font-size;
      color: $msgr-input-font-color;
    }
  }
}

$feedback-w: 300px;
$feedback-p: 50px 0 42px;
$feedback-border-c: #e6e6e6;

$feedback-hdr-font: 'Roboto Regular', sans-serif;
$feedback-hdr-font-size: 16px;

$feedback-review-w: 60%;
$feedback-review-border-radius: 100px;
$feedback-review-border-c: #979797;
$feedback-review-font: 'Roboto Regular', sans-serif;
$feedback-review-font-size: 16px;
$feedback-review-p: 7px 0 10px;

.feedback {
  width: $feedback-w;
  padding: $feedback-p;

  display: flex;
  flex-direction: column;
  align-items: center;

  border-bottom: solid 1px $feedback-border-c;
  text-align: center;

  .feedback__hdr {
    margin-bottom: 10px;
    font-family: $feedback-hdr-font;
    font-size: $feedback-hdr-font-size;
  }

  .feedback__review {
    margin-top: 14px;
    width: $feedback-review-w;
    padding: $feedback-review-p;
    outline: none;
    border: solid 1px $feedback-review-border-c;
    border-radius: $feedback-review-border-radius;
    text-align: center;
    font-family: $feedback-review-font;
    font-size: $feedback-review-font-size;
  }
}

$rating-c: #ffba00;
$rating-star-size: 10px;
$rating-star-spacing: 7px;

.rating {
  margin: 0;
  padding: 0;
  display: inline-block;
  border: none;
  font-size: $rating-star-size;

  input {
    display: none;              // hide actual radio inputs
  }
  label {
    color: $rating-c;
    float: right;

    &:before {
      display: block;
      font-family: FontAwesome;
    }
    &:not(:last-of-type):before {
      margin-right: $rating-star-spacing;
    }
  }

  .rating__half-star:before {   // left half-star
    content: '\f089';           // fa-star-half
    position: absolute;
    opacity: 0;
  }

  input:checked + .rating__half-star:before,      // left half-star is visible when checked
  &.hoverable .rating__half-star:hover:before {   // left half-star is visible when hovered
    opacity: 1;
  }

  .rating__full-star:before {   // empty star
    content: '\f006';           // fa-star-o
  }

  &.hoverable .rating__full-star:hover:before,          // fill empty star when it's hovered
  input:checked ~ .rating__full-star:before,            // fill checked empty star and all empty stars left to it
  &.hoverable label:hover ~ .rating__full-star:before { // Fill all stars preceding to hovered one
    content: '\f005';           // fa-star
  }
}

$subscribe-padding: 60px 0 75px;
$subscribe-font: 'Roboto Regular', sans-serif;
$subscribe-font-size: 16px;
$subscribe-font-c: $webchat-c-main;

.subscribe {
  padding: $subscribe-padding;
  font-family: $subscribe-font;
  font-size: $subscribe-font-size;
  color: $subscribe-font-c;
  text-align: center;
}

$similar-w: 320px;
$similar-hdr-p: 15px 0;
$similar-hdr-font: 'Roboto Regular', sans-serif;
$similar-hdr-font-size: 16px;
$similar-item-spacer: 15px;
$similar-logo-size: 89px;
$similar-info-p: 8px 11px 10px;
$similar-border-c: #e6e6e6;
$similar-name-font: 'Roboto Medium', sans-serif;
$similar-name-font-size: 16px;
$similar-desc-font: 'Lucida Grande', sans-serif;
$similar-desc-font-size: 10px;
$similar-call-size: $similar-logo-size - 1px;
$similar-call-btn-size: 45px;
$similar-call-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);

.similar {
  width: $similar-w;

  .similar__hdr {
    padding: $similar-hdr-p;
    font-family: $similar-hdr-font;
    font-size: $similar-hdr-font-size;
    text-align: center;
  }
  .similar__item {
    width: 100%;
    display: flex;

    &:not(:last-of-type) {  // space between consequent items
      margin-bottom: $similar-item-spacer;
    }

    .similar__logo {
      flex: 0 0 auto;
      width: $similar-logo-size;
      height: $similar-logo-size;
    }
    .similar__info {
      flex: 1 1 auto;
      padding: $similar-info-p;
      border-top: solid 1px $similar-border-c;
      border-bottom: solid 1px $similar-border-c;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: flex-start;

      .similar__name {
        font-family: $similar-name-font;
        font-size: $similar-name-font-size;
      }
      .similar__desc{
        font-family: $similar-desc-font;
        font-size: $similar-desc-font-size;
      }
    }
    .similar__call {
      flex: 0 0 auto;
      border-top: solid 1px $similar-border-c;
      border-bottom: solid 1px $similar-border-c;
      width: $similar-call-size;
      height: $similar-call-size;
      display: flex;
      justify-content: center;
      align-items: center;

      .similar__call-btn {
        @extend .btn--circle;
        width: $similar-call-btn-size;
        height: $similar-call-btn-size;
        box-shadow: $similar-call-shadow;
        background: $webchat-c-main;
      }
    }
  }
}

$back-btn-m: 15px auto 5px;
$back-btn-font-family: 'Roboto Medium', sans-serif;
$back-btn-font-size: 14px;
$back-btn-font-c: white;
$back-btn-bg-c: $webchat-c-bluedark;
$back-btn-p: 7px 70px;
$back-btn-border-radius: 100px;

.back-btn {
  @extend .btn;

  display: block;
  margin: $back-btn-m;
  padding: $back-btn-p;
  background: $back-btn-bg-c;
  border-radius: $back-btn-border-radius;

  font-family: $back-btn-font-family;
  font-size: $back-btn-font-size;
  color: $back-btn-font-c;
}

.icon {
  vertical-align: middle;

  &.icon--white {
    color: white;
  }
  &.icon--color {
    color: $webchat-c-main;
  }
  &.icon--color-scnd {
    color: #f8e71c;
  }
  &.icon--lg {
    font-size: 30px;
  }
  &.icon--md {
    font-size: 26px;
  }
  &.icon--sm {
    font-size: 20px;
  }
  &.icon--xs {
    font-size: 16px;
  }
  &.icon--crossed {
    position: relative;

    &:after{
      content: '';
      position: absolute;
      top: 7px;
      right: -4px;
      width: 1.4em;
      height: 2px;
      background: $webchat-c-main;
      border-top: 2px solid white;
      transform: rotate(-45deg);
    }
  }
  // Icon before text
  &.icon--shifted {
    margin-right: 5px;
    margin-bottom: 3px;
  }
  &.icon--circled {
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    background: $webchat-c-stop;
    border-radius: 50%;
    font-size: 0.7em;
    padding: 2px;
    &:before {
      vertical-align: middle;
    }
  }
}

$timer-font: 'Roboto Medium', sans-serif;
$timer-font-size: 10px;
$timer-font-c: $webchat-c-main;

.timer {
  font-family: $timer-font;
  font-size: $timer-font-size;
  color: $timer-font-c;
}
